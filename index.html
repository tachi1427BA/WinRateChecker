<!DOCTYPE html> 
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç·¨æˆå‹ç‡æ¯”è¼ƒçµ±è¨ˆãƒ„ãƒ¼ãƒ«</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide-react/0.263.1/umd/lucide-react.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;
        const { Calculator, TrendingUp, BarChart3, Users, Zap } = lucideReact;

        const PlayerComparisonTool = () => {
            const [playerA, setPlayerA] = useState({ name: 'ç·¨æˆA', wins: '', losses: '' });
            const [playerB, setPlayerB] = useState({ name: 'ç·¨æˆB', wins: '', losses: '' });

            // Wilsonä¿¡é ¼åŒºé–“ã®è¨ˆç®—
            const calculateWilsonInterval = (wins, total, confidence = 0.95) => {
                if (total === 0) return { lower: 0, upper: 0, point: 0 };
                
                // ä¿¡é ¼åº¦ã«å¿œã˜ãŸzå€¤ã‚’è¨ˆç®—
                const getZValue = (conf) => {
                    if (conf === 0.95) return 1.96;
                    if (conf === 0.50) return 0.674;
                    // ãã®ä»–ã®ä¿¡é ¼åº¦ã®å ´åˆã®è¿‘ä¼¼è¨ˆç®—
                    return Math.sqrt(2) * Math.sqrt(-Math.log(1 - conf));
                };
                
                const z = getZValue(confidence);
                const p = wins / total;
                const denominator = 1 + (z * z) / total;
                const center = (p + (z * z) / (2 * total)) / denominator;
                const margin = z * Math.sqrt((p * (1 - p) + (z * z) / (4 * total)) / total) / denominator;
                
                return {
                    point: p,
                    lower: Math.max(0, center - margin),
                    upper: Math.min(1, center + margin)
                };
            };

            // 2æ¨™æœ¬æ¯”ç‡æ¤œå®š
            const twoProportionTest = (wins1, total1, wins2, total2) => {
                if (total1 === 0 || total2 === 0) return null;
                
                const p1 = wins1 / total1;
                const p2 = wins2 / total2;
                const pooledP = (wins1 + wins2) / (total1 + total2);
                const standardError = Math.sqrt(pooledP * (1 - pooledP) * (1/total1 + 1/total2));
                
                if (standardError === 0) return null;
                
                const z = (p1 - p2) / standardError;
                const pValue = 2 * (1 - normalCDF(Math.abs(z))); // ä¸¡å´æ¤œå®š
                
                return { z, pValue, difference: p1 - p2 };
            };

            // æ­£è¦åˆ†å¸ƒã®ç´¯ç©åˆ†å¸ƒé–¢æ•°ï¼ˆè¿‘ä¼¼ï¼‰
            const normalCDF = (x) => {
                return 0.5 * (1 + erf(x / Math.sqrt(2)));
            };

            // èª¤å·®é–¢æ•°ã®è¿‘ä¼¼
            const erf = (x) => {
                const a1 =  0.254829592;
                const a2 = -0.284496736;
                const a3 =  1.421413741;
                const a4 = -1.453152027;
                const a5 =  1.061405429;
                const p  =  0.3275911;

                const sign = x < 0 ? -1 : 1;
                x = Math.abs(x);

                const t = 1.0 / (1.0 + p * x);
                const y = 1.0 - (((((a5 * t + a4) * t) + a3) * t + a2) * t + a1) * t * Math.exp(-x * x);

                return sign * y;
            };

            // Cohen's håŠ¹æœé‡
            const calculateCohenH = (p1, p2) => {
                const h = 2 * (Math.asin(Math.sqrt(p1)) - Math.asin(Math.sqrt(p2)));
                return h;
            };

            // ãƒ™ã‚¤ã‚ºæ¨å®šï¼ˆãƒ™ãƒ¼ã‚¿åˆ†å¸ƒï¼‰- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼AãŒå¼·ã„ç¢ºç‡
            const calculateBayesianProbability = (winsA, totalA, winsB, totalB) => {
                // ãƒ™ãƒ¼ã‚¿åˆ†å¸ƒã®ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°è¿‘ä¼¼
                const samples = 10000;
                let countAWins = 0;

                for (let i = 0; i < samples; i++) {
                    const pA = betaRandom(winsA + 1, totalA - winsA + 1);
                    const pB = betaRandom(winsB + 1, totalB - winsB + 1);
                    if (pA > pB) countAWins++;
                }

                return countAWins / samples;
            };

            // ãƒ™ãƒ¼ã‚¿åˆ†å¸ƒã‹ã‚‰ã®ãƒ©ãƒ³ãƒ€ãƒ ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ï¼ˆè¿‘ä¼¼ï¼‰
            const betaRandom = (alpha, beta) => {
                const gamma1 = gammaRandom(alpha);
                const gamma2 = gammaRandom(beta);
                return gamma1 / (gamma1 + gamma2);
            };

            // ã‚¬ãƒ³ãƒåˆ†å¸ƒã‹ã‚‰ã®ãƒ©ãƒ³ãƒ€ãƒ ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ï¼ˆè¿‘ä¼¼ï¼‰
            const gammaRandom = (shape) => {
                // ç°¡æ˜“å®Ÿè£…ï¼ˆå½¢çŠ¶ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒ1ä»¥ä¸Šã®å ´åˆï¼‰
                if (shape < 1) return gammaRandom(shape + 1) * Math.pow(Math.random(), 1/shape);
                
                const d = shape - 1/3;
                const c = 1 / Math.sqrt(9 * d);
                
                while (true) {
                    let x, v;
                    do {
                        x = normalRandom();
                        v = 1 + c * x;
                    } while (v <= 0);
                    
                    v = v * v * v;
                    const u = Math.random();
                    
                    if (u < 1 - 0.0331 * x * x * x * x) {
                        return d * v;
                    }
                    
                    if (Math.log(u) < 0.5 * x * x + d * (1 - v + Math.log(v))) {
                        return d * v;
                    }
                }
            };

            // æ­£è¦åˆ†å¸ƒã‹ã‚‰ã®ãƒ©ãƒ³ãƒ€ãƒ ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°
            const normalRandom = () => {
                // Box-Mullerå¤‰æ›
                if (normalRandom.spare !== undefined) {
                    const tmp = normalRandom.spare;
                    delete normalRandom.spare;
                    return tmp;
                }
                
                const u1 = Math.random();
                const u2 = Math.random();
                const mag = Math.sqrt(-2 * Math.log(u1));
                normalRandom.spare = mag * Math.cos(2 * Math.PI * u2);
                return mag * Math.sin(2 * Math.PI * u2);
            };

            // å€‹åˆ¥ç·¨æˆã®çµ±è¨ˆ
            const statsA = useMemo(() => {
                const winsA = parseInt(playerA.wins) || 0;
                const lossesA = parseInt(playerA.losses) || 0;
                const totalA = winsA + lossesA;
                
                if (totalA === 0) return null;
                
                const interval95 = calculateWilsonInterval(winsA, totalA, 0.95);
                const interval50 = calculateWilsonInterval(winsA, totalA, 0.50);
                return { 
                    wins: winsA, 
                    losses: lossesA, 
                    total: totalA, 
                    interval95, 
                    interval50 
                };
            }, [playerA]);

            const statsB = useMemo(() => {
                const winsB = parseInt(playerB.wins) || 0;
                const lossesB = parseInt(playerB.losses) || 0;
                const totalB = winsB + lossesB;
                
                if (totalB === 0) return null;
                
                const interval95 = calculateWilsonInterval(winsB, totalB, 0.95);
                const interval50 = calculateWilsonInterval(winsB, totalB, 0.50);
                return { 
                    wins: winsB, 
                    losses: lossesB, 
                    total: totalB, 
                    interval95, 
                    interval50 
                };
            }, [playerB]);

            // æ¯”è¼ƒçµ±è¨ˆï¼ˆä¸¡æ–¹ã®ç·¨æˆãƒ‡ãƒ¼ã‚¿ãŒæƒã£ãŸå ´åˆã®ã¿ï¼‰
            const comparisonStats = useMemo(() => {
                if (!statsA || !statsB) return null;
                
                const test = twoProportionTest(statsA.wins, statsA.total, statsB.wins, statsB.total);
                const cohenH = calculateCohenH(statsA.interval95.point, statsB.interval95.point);
                const bayesianProb = calculateBayesianProbability(statsA.wins, statsA.total, statsB.wins, statsB.total);
                
                return {
                    test,
                    cohenH,
                    bayesianProb,
                    intervalsOverlap95: statsA.interval95.upper >= statsB.interval95.lower && statsB.interval95.upper >= statsA.interval95.lower,
                    intervalsOverlap50: statsA.interval50.upper >= statsB.interval50.lower && statsB.interval50.upper >= statsA.interval50.lower
                };
            }, [statsA, statsB]);

            const formatPercentage = (value) => {
                return (value * 100).toFixed(1);
            };

            const getSignificanceLevel = (pValue) => {
                if (pValue < 0.001) return '***ï¼ˆéå¸¸ã«é«˜ã„æœ‰æ„æ€§ï¼‰';
                if (pValue < 0.01) return '**ï¼ˆé«˜ã„æœ‰æ„æ€§ï¼‰';
                if (pValue < 0.05) return '*ï¼ˆæœ‰æ„ï¼‰';
                return 'ï¼ˆæœ‰æ„ã§ãªã„ï¼‰';
            };

            const getEffectSize = (h) => {
                const absH = Math.abs(h);
                if (absH < 0.2) return 'å°ã•ã„';
                if (absH < 0.5) return 'ä¸­ç¨‹åº¦';
                if (absH < 0.8) return 'å¤§ãã„';
                return 'éå¸¸ã«å¤§ãã„';
            };

            return (
                <div className="max-w-4xl mx-auto p-6 bg-gradient-to-br from-purple-50 to-blue-100 min-h-screen">
                    <div className="bg-white rounded-lg shadow-lg p-8">
                        <div className="flex items-center gap-3 mb-8">
                            <Users className="w-8 h-8 text-purple-600" />
                            <h1 className="text-2xl font-bold text-gray-800">ç·¨æˆå‹ç‡æ¯”è¼ƒçµ±è¨ˆãƒ„ãƒ¼ãƒ«</h1>
                        </div>

                        <div className="space-y-8">
                            {/* ç·¨æˆå…¥åŠ›ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */}
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                {/* ç·¨æˆA */}
                                <div className="bg-blue-50 p-6 rounded-lg border border-blue-200">
                                    <h2 className="text-lg font-semibold text-blue-700 mb-4 flex items-center gap-2">
                                        <BarChart3 className="w-5 h-5" />
                                        ç·¨æˆA
                                    </h2>
                                    <div className="space-y-4">
                                        <input
                                            type="text"
                                            value={playerA.name}
                                            onChange={(e) => setPlayerA({...playerA, name: e.target.value})}
                                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                            placeholder="ç·¨æˆå"
                                        />
                                        <div className="grid grid-cols-2 gap-3">
                                            <div>
                                                <label className="block text-sm font-medium text-gray-600 mb-1">å‹åˆ©æ•°</label>
                                                <input
                                                    type="number"
                                                    value={playerA.wins}
                                                    onChange={(e) => setPlayerA({...playerA, wins: e.target.value})}
                                                    className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                                    placeholder="0"
                                                    min="0"
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-medium text-gray-600 mb-1">æ•—åŒ—æ•°</label>
                                                <input
                                                    type="number"
                                                    value={playerA.losses}
                                                    onChange={(e) => setPlayerA({...playerA, losses: e.target.value})}
                                                    className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                                    placeholder="0"
                                                    min="0"
                                                />
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                {/* ç·¨æˆB */}
                                <div className="bg-red-50 p-6 rounded-lg border border-red-200">
                                    <h2 className="text-lg font-semibold text-red-700 mb-4 flex items-center gap-2">
                                        <BarChart3 className="w-5 h-5" />
                                        ç·¨æˆB
                                    </h2>
                                    <div className="space-y-4">
                                        <input
                                            type="text"
                                            value={playerB.name}
                                            onChange={(e) => setPlayerB({...playerB, name: e.target.value})}
                                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                                            placeholder="ç·¨æˆå"
                                        />
                                        <div className="grid grid-cols-2 gap-3">
                                            <div>
                                                <label className="block text-sm font-medium text-gray-600 mb-1">å‹åˆ©æ•°</label>
                                                <input
                                                    type="number"
                                                    value={playerB.wins}
                                                    onChange={(e) => setPlayerB({...playerB, wins: e.target.value})}
                                                    className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                                                    placeholder="0"
                                                    min="0"
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-medium text-gray-600 mb-1">æ•—åŒ—æ•°</label>
                                                <input
                                                    type="number"
                                                    value={playerB.losses}
                                                    onChange={(e) => setPlayerB({...playerB, losses: e.target.value})}
                                                    className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                                                    placeholder="0"
                                                    min="0"
                                                />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* å€‹åˆ¥ç·¨æˆçµ±è¨ˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ */}
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                {/* ç·¨æˆAçµ±è¨ˆ */}
                                {statsA && (
                                    <div className="bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-lg border border-blue-200">
                                        <h2 className="text-lg font-semibold text-blue-700 mb-4 flex items-center gap-2">
                                            <TrendingUp className="w-5 h-5" />
                                            {playerA.name} çµ±è¨ˆ
                                        </h2>
                                        
                                        <div className="space-y-4">
                                            {/* åŸºæœ¬æƒ…å ± */}
                                            <div className="grid grid-cols-3 gap-2 text-center">
                                                <div className="bg-white p-3 rounded-lg">
                                                    <div className="text-xl font-bold text-blue-600">{statsA.total}</div>
                                                    <div className="text-xs text-gray-600">ç·è©¦åˆæ•°</div>
                                                </div>
                                                <div className="bg-white p-3 rounded-lg">
                                                    <div className="text-xl font-bold text-green-600">{statsA.wins}</div>
                                                    <div className="text-xs text-gray-600">å‹åˆ©</div>
                                                </div>
                                                <div className="bg-white p-3 rounded-lg">
                                                    <div className="text-xl font-bold text-red-600">{statsA.losses}</div>
                                                    <div className="text-xs text-gray-600">æ•—åŒ—</div>
                                                </div>
                                            </div>

                                            {/* å‹ç‡æƒ…å ± */}
                                            <div className="bg-white p-4 rounded-lg">
                                                <div className="text-center mb-3">
                                                    <div className="text-2xl font-bold text-blue-600">
                                                        {formatPercentage(statsA.interval95.point)}%
                                                    </div>
                                                    <div className="text-sm text-gray-600">æ¨å®šå‹ç‡</div>
                                                </div>

                                                <div className="border-t pt-3 space-y-2">
                                                    <div className="text-center">
                                                        <div className="text-sm font-semibold text-gray-700 mb-1">
                                                            95% ä¿¡é ¼åŒºé–“
                                                        </div>
                                                        <div className="text-lg font-bold text-purple-600">
                                                            {formatPercentage(statsA.interval95.lower)}% ã€œ {formatPercentage(statsA.interval95.upper)}%
                                                        </div>
                                                    </div>
                                                    
                                                    <div className="text-center">
                                                        <div className="text-sm font-semibold text-gray-700 mb-1">
                                                            50% ä¿¡é ¼åŒºé–“
                                                        </div>
                                                        <div className="text-md font-bold text-indigo-600">
                                                            {formatPercentage(statsA.interval50.lower)}% ã€œ {formatPercentage(statsA.interval50.upper)}%
                                                        </div>
                                                    </div>
                                                </div>

                                                {/* è¦–è¦šçš„ãªä¿¡é ¼åŒºé–“ */}
                                                <div className="mt-4 space-y-2">
                                                    {/* 95%ä¿¡é ¼åŒºé–“ */}
                                                    <div>
                                                        <div className="text-xs text-gray-600 mb-1">95%ä¿¡é ¼åŒºé–“</div>
                                                        <div className="relative h-4 bg-gray-200 rounded-full overflow-hidden">
                                                            {/* 50%åŸºæº–ç·š */}
                                                            <div className="absolute w-0.5 h-full bg-gray-600 z-20" style={{ left: '50%' }} />
                                                            <div 
                                                                className="absolute h-full bg-gradient-to-r from-blue-300 to-blue-400 rounded-full"
                                                                style={{
                                                                    left: `${statsA.interval95.lower * 100}%`,
                                                                    width: `${(statsA.interval95.upper - statsA.interval95.lower) * 100}%`
                                                                }}
                                                            />
                                                            <div 
                                                                className="absolute w-0.5 h-full bg-blue-800 z-10"
                                                                style={{ left: `${statsA.interval95.point * 100}%` }}
                                                            />
                                                        </div>
                                                    </div>
                                                    
                                                    {/* 50%ä¿¡é ¼åŒºé–“ */}
                                                    <div>
                                                        <div className="text-xs text-gray-600 mb-1">50%ä¿¡é ¼åŒºé–“</div>
                                                        <div className="relative h-4 bg-gray-200 rounded-full overflow-hidden">
                                                            {/* 50%åŸºæº–ç·š */}
                                                            <div className="absolute w-0.5 h-full bg-gray-600 z-20" style={{ left: '50%' }} />
                                                            <div 
                                                                className="absolute h-full bg-gradient-to-r from-blue-500 to-blue-600 rounded-full"
                                                                style={{
                                                                    left: `${statsA.interval50.lower * 100}%`,
                                                                    width: `${(statsA.interval50.upper - statsA.interval50.lower) * 100}%`
                                                                }}
                                                            />
                                                            <div 
                                                                className="absolute w-0.5 h-full bg-blue-800 z-10"
                                                                style={{ left: `${statsA.interval50.point * 100}%` }}
                                                            />
                                                        </div>
                                                    </div>
                                                    
                                                    <div className="flex justify-between text-xs text-gray-500 mt-1">
                                                        <span>0%</span>
                                                        <span>25%</span>
                                                        <span className="font-semibold">50%</span>
                                                        <span>75%</span>
                                                        <span>100%</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                )}

                                {/* ç·¨æˆBçµ±è¨ˆ */}
                                {statsB && (
                                    <div className="bg-gradient-to-r from-red-50 to-pink-50 p-6 rounded-lg border border-red-200">
                                        <h2 className="text-lg font-semibold text-red-700 mb-4 flex items-center gap-2">
                                            <TrendingUp className="w-5 h-5" />
                                            {playerB.name} çµ±è¨ˆ
                                        </h2>
                                        
                                        <div className="space-y-4">
                                            {/* åŸºæœ¬æƒ…å ± */}
                                            <div className="grid grid-cols-3 gap-2 text-center">
                                                <div className="bg-white p-3 rounded-lg">
                                                    <div className="text-xl font-bold text-red-600">{statsB.total}</div>
                                                    <div className="text-xs text-gray-600">ç·è©¦åˆæ•°</div>
                                                </div>
                                                <div className="bg-white p-3 rounded-lg">
                                                    <div className="text-xl font-bold text-green-600">{statsB.wins}</div>
                                                    <div className="text-xs text-gray-600">å‹åˆ©</div>
                                                </div>
                                                <div className="bg-white p-3 rounded-lg">
                                                    <div className="text-xl font-bold text-red-600">{statsB.losses}</div>
                                                    <div className="text-xs text-gray-600">æ•—åŒ—</div>
                                                </div>
                                            </div>

                                            {/* å‹ç‡æƒ…å ± */}
                                            <div className="bg-white p-4 rounded-lg">
                                                <div className="text-center mb-3">
                                                    <div className="text-2xl font-bold text-red-600">
                                                        {formatPercentage(statsB.interval95.point)}%
                                                    </div>
                                                    <div className="text-sm text-gray-600">æ¨å®šå‹ç‡</div>
                                                </div>

                                                <div className="border-t pt-3 space-y-2">
                                                    <div className="text-center">
                                                        <div className="text-sm font-semibold text-gray-700 mb-1">
                                                            95% ä¿¡é ¼åŒºé–“
                                                        </div>
                                                        <div className="text-lg font-bold text-purple-600">
                                                            {formatPercentage(statsB.interval95.lower)}% ã€œ {formatPercentage(statsB.interval95.upper)}%
                                                        </div>
                                                    </div>
                                                    
                                                    <div className="text-center">
                                                        <div className="text-sm font-semibold text-gray-700 mb-1">
                                                            50% ä¿¡é ¼åŒºé–“
                                                        </div>
                                                        <div className="text-md font-bold text-indigo-600">
                                                            {formatPercentage(statsB.interval50.lower)}% ã€œ {formatPercentage(statsB.interval50.upper)}%
                                                        </div>
                                                    </div>
                                                </div>

                                                {/* è¦–è¦šçš„ãªä¿¡é ¼åŒºé–“ */}
                                                <div className="mt-4 space-y-2">
                                                    {/* 95%ä¿¡é ¼åŒºé–“ */}
                                                    <div>
                                                        <div className="text-xs text-gray-600 mb-1">95%ä¿¡é ¼åŒºé–“</div>
                                                        <div className="relative h-4 bg-gray-200 rounded-full overflow-hidden">
                                                            {/* 50%åŸºæº–ç·š */}
                                                            <div className="absolute w-0.5 h-full bg-gray-600 z-20" style={{ left: '50%' }} />
                                                            <div 
                                                                className="absolute h-full bg-gradient-to-r from-red-300 to-red-400 rounded-full"
                                                                style={{
                                                                    left: `${statsB.interval95.lower * 100}%`,
                                                                    width: `${(statsB.interval95.upper - statsB.interval95.lower) * 100}%`
                                                                }}
                                                            />
                                                            <div 
                                                                className="absolute w-0.5 h-full bg-red-800 z-10"
                                                                style={{ left: `${statsB.interval95.point * 100}%` }}
                                                            />
                                                        </div>
                                                    </div>
                                                    
                                                    {/* 50%ä¿¡é ¼åŒºé–“ */}
                                                    <div>
                                                        <div className="text-xs text-gray-600 mb-1">50%ä¿¡é ¼åŒºé–“</div>
                                                        <div className="relative h-4 bg-gray-200 rounded-full overflow-hidden">
                                                            {/* 50%åŸºæº–ç·š */}
                                                            <div className="absolute w-0.5 h-full bg-gray-600 z-20" style={{ left: '50%' }} />
                                                            <div 
                                                                className="absolute h-full bg-gradient-to-r from-red-500 to-red-600 rounded-full"
                                                                style={{
                                                                    left: `${statsB.interval50.lower * 100}%`,
                                                                    width: `${(statsB.interval50.upper - statsB.interval50.lower) * 100}%`
                                                                }}
                                                            />
                                                            <div 
                                                                className="absolute w-0.5 h-full bg-red-800 z-10"
                                                                style={{ left: `${statsB.interval50.point * 100}%` }}
                                                            />
                                                        </div>
                                                    </div>
                                                    
                                                    <div className="flex justify-between text-xs text-gray-500 mt-1">
                                                        <span>0%</span>
                                                        <span>25%</span>
                                                        <span className="font-semibold">50%</span>
                                                        <span>75%</span>
                                                        <span>100%</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                )}
                            </div>

                            {/* æ¯”è¼ƒçµæœã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆä¸¡æ–¹ã®ç·¨æˆãƒ‡ãƒ¼ã‚¿ãŒæƒã£ãŸå ´åˆã®ã¿ï¼‰ */}
                            {comparisonStats && (
                                <div className="space-y-6">
                                    {/* åŸºæœ¬æ¯”è¼ƒçµ±è¨ˆ */}
                                    <div className="bg-gradient-to-r from-purple-50 to-indigo-50 p-6 rounded-lg border border-purple-200">
                                        <h2 className="text-lg font-semibold text-gray-700 mb-4 flex items-center gap-2">
                                            <Calculator className="w-5 h-5" />
                                            ç·¨æˆæ¯”è¼ƒ
                                        </h2>
                                        
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                            {/* ç·¨æˆAè¦ç´„ */}
                                            <div className="bg-white p-4 rounded-lg">
                                                <h3 className="font-semibold text-blue-700 mb-3">{playerA.name}</h3>
                                                <div className="space-y-2">
                                                    <div className="flex justify-between">
                                                        <span>ç·è©¦åˆæ•°:</span>
                                                        <span className="font-bold">{statsA.total}</span>
                                                    </div>
                                                    <div className="flex justify-between">
                                                        <span>å‹ç‡:</span>
                                                        <span className="font-bold text-blue-600">{formatPercentage(statsA.interval95.point)}%</span>
                                                    </div>
                                                    <div className="flex justify-between text-sm">
                                                        <span>95%ä¿¡é ¼åŒºé–“:</span>
                                                        <span>{formatPercentage(statsA.interval95.lower)}% - {formatPercentage(statsA.interval95.upper)}%</span>
                                                    </div>
                                                    <div className="flex justify-between text-sm">
                                                        <span>50%ä¿¡é ¼åŒºé–“:</span>
                                                        <span>{formatPercentage(statsA.interval50.lower)}% - {formatPercentage(statsA.interval50.upper)}%</span>
                                                    </div>
                                                </div>
                                            </div>

                                            {/* ç·¨æˆBè¦ç´„ */}
                                            <div className="bg-white p-4 rounded-lg">
                                                <h3 className="font-semibold text-red-700 mb-3">{playerB.name}</h3>
                                                <div className="space-y-2">
                                                    <div className="flex justify-between">
                                                        <span>ç·è©¦åˆæ•°:</span>
                                                        <span className="font-bold">{statsB.total}</span>
                                                    </div>
                                                    <div className="flex justify-between">
                                                        <span>å‹ç‡:</span>
                                                        <span className="font-bold text-red-600">{formatPercentage(statsB.interval95.point)}%</span>
                                                    </div>
                                                    <div className="flex justify-between text-sm">
                                                        <span>95%ä¿¡é ¼åŒºé–“:</span>
                                                        <span>{formatPercentage(statsB.interval95.lower)}% - {formatPercentage(statsB.interval95.upper)}%</span>
                                                    </div>
                                                    <div className="flex justify-between text-sm">
                                                        <span>50%ä¿¡é ¼åŒºé–“:</span>
                                                        <span>{formatPercentage(statsB.interval50.lower)}% - {formatPercentage(statsB.interval50.upper)}%</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    {/* çµ±è¨ˆçš„æ¯”è¼ƒ */}
                                    <div className="bg-gradient-to-r from-yellow-50 to-orange-50 p-6 rounded-lg border border-yellow-200">
                                        <h2 className="text-lg font-semibold text-gray-700 mb-4 flex items-center gap-2">
                                            <Zap className="w-5 h-5" />
                                            çµ±è¨ˆçš„æ¯”è¼ƒçµæœ
                                        </h2>

                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                            {/* çµ±è¨ˆæ¤œå®šçµæœ */}
                                            <div className="bg-white p-4 rounded-lg">
                                                <h3 className="font-semibold text-gray-700 mb-3">çµ±è¨ˆçš„æ¤œå®š</h3>
                                                {comparisonStats.test && (
                                                    <div className="space-y-2">
                                                        <div className="flex justify-between">
                                                            <span>å‹ç‡ã®å·®:</span>
                                                            <span className="font-bold">{formatPercentage(Math.abs(comparisonStats.test.difference))}%</span>
                                                        </div>
                                                        <div className="flex justify-between">
                                                            <span>zçµ±è¨ˆé‡:</span>
                                                            <span className="font-bold">{comparisonStats.test.z.toFixed(3)}</span>
                                                        </div>
                                                        <div className="flex justify-between">
                                                            <span>på€¤:</span>
                                                            <span className="font-bold">{comparisonStats.test.pValue.toFixed(6)}</span>
                                                        </div>
                                                        <div className="text-sm text-gray-600">
                                                            {getSignificanceLevel(comparisonStats.test.pValue)}
                                                        </div>
                                                    </div>
                                                )}
                                            </div>

                                            {/* åŠ¹æœé‡ã¨ãƒ™ã‚¤ã‚ºæ¨å®š */}
                                            <div className="bg-white p-4 rounded-lg">
                                                <h3 className="font-semibold text-gray-700 mb-3">åŠ¹æœã®å¤§ãã•</h3>
                                                <div className="space-y-2">
                                                    <div className="flex justify-between">
                                                        <span>Cohen's h:</span>
                                                        <span className="font-bold">{Math.abs(comparisonStats.cohenH).toFixed(3)}</span>
                                                    </div>
                                                    <div className="text-sm text-gray-600">
                                                        åŠ¹æœé‡: {getEffectSize(comparisonStats.cohenH)}
                                                    </div>
                                                    <div className="border-t pt-2 mt-3">
                                                        <div className="flex justify-between">
                                                            <span>{playerA.name}ãŒå¼·ã„ç¢ºç‡:</span>
                                                            <span className="font-bold text-purple-600">{formatPercentage(comparisonStats.bayesianProb)}%</span>
                                                        </div>
                                                        <div className="flex justify-between">
                                                            <span>{playerB.name}ãŒå¼·ã„ç¢ºç‡:</span>
                                                            <span className="font-bold text-purple-600">{formatPercentage(1 - comparisonStats.bayesianProb)}%</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        {/* çµè«– */}
                                        <div className="mt-6 p-4 bg-green-50 rounded-lg border border-green-200">
                                            <h3 className="font-semibold text-green-800 mb-2">ğŸ“Š çµ±è¨ˆçš„çµè«–</h3>
                                            <div className="text-sm text-green-700 space-y-1">
                                                {comparisonStats.test && comparisonStats.test.pValue < 0.05 ? (
                                                    <p>â€¢ <strong>çµ±è¨ˆçš„ã«æœ‰æ„ãªå·®ãŒã‚ã‚Šã¾ã™</strong> (p &lt; 0.05)</p>
                                                ) : (
                                                    <p>â€¢ çµ±è¨ˆçš„ã«æœ‰æ„ãªå·®ã¯æ¤œå‡ºã•ã‚Œã¾ã›ã‚“ã§ã—ãŸ (p â‰¥ 0.05)</p>
                                                )}
                                                <p>â€¢ 95%ä¿¡é ¼åŒºé–“ã®é‡ãªã‚Š: {comparisonStats.intervalsOverlap95 ? 'ã‚ã‚Š' : 'ãªã—'}</p>
                                                <p>â€¢ 50%ä¿¡é ¼åŒºé–“ã®é‡ãªã‚Š: {comparisonStats.intervalsOverlap50 ? 'ã‚ã‚Š' : 'ãªã—'}</p>
                                                <p>â€¢ ãƒ™ã‚¤ã‚ºæ¨å®šã§ã¯<strong>{comparisonStats.bayesianProb > 0.5 ? playerA.name : playerB.name}</strong>ãŒå¼·ã„å¯èƒ½æ€§ãŒé«˜ã„ï¼ˆ{formatPercentage(Math.max(comparisonStats.bayesianProb, 1 - comparisonStats.bayesianProb))}%ï¼‰</p>
                                                <p>â€¢ åŠ¹æœã®å¤§ãã•: {getEffectSize(comparisonStats.cohenH)}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {!statsA && !statsB && (
                                <div className="text-center py-8 text-gray-500">
                                    ç·¨æˆã®å‹æ•—æ•°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                                </div>
                            )}

                            {(statsA || statsB) && !comparisonStats && (
                                <div className="text-center py-4 text-blue-600 bg-blue-50 rounded-lg">
                                    ã‚‚ã†ä¸€æ–¹ã®ç·¨æˆãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€çµ±è¨ˆçš„æ¯”è¼ƒãŒå¯èƒ½ã«ãªã‚Šã¾ã™
                                </div>
                            )}

                            {/* èª¬æ˜ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */}
                            <div className="bg-blue-50 p-4 rounded-lg border border-blue-200">
                                <h3 className="font-semibold text-blue-800 mb-2">ğŸ”¬ çµ±è¨ˆæ‰‹æ³•ã®èª¬æ˜</h3>
                                <div className="text-sm text-blue-700 space-y-1">
                                    <p>â€¢ <strong>Wilsonä¿¡é ¼åŒºé–“:</strong> å„ç·¨æˆã®çœŸã®å‹ç‡ã®ä¿¡é ¼åŒºé–“ã‚’è¨ˆç®—ï¼ˆ95%ã¨50%ã®ä¸¡æ–¹ï¼‰</p>
                                    <p>â€¢ <strong>95%ä¿¡é ¼åŒºé–“:</strong> çœŸã®å‹ç‡ãŒ95%ã®ç¢ºç‡ã§ã“ã®ç¯„å›²å†…ã«ã‚ã‚‹</p>
                                    <p>â€¢ <strong>50%ä¿¡é ¼åŒºé–“:</strong> çœŸã®å‹ç‡ãŒ50%ã®ç¢ºç‡ã§ã“ã®ç¯„å›²å†…ã«ã‚ã‚‹ï¼ˆã‚ˆã‚Šç‹­ã„ç¯„å›²ï¼‰</p>
                                    <p>â€¢ <strong>2æ¨™æœ¬æ¯”ç‡æ¤œå®š:</strong> 2ã¤ã®ç·¨æˆã®å‹ç‡ãŒçµ±è¨ˆçš„ã«æœ‰æ„ã«ç•°ãªã‚‹ã‹ã‚’æ¤œå®š</p>
                                    <p>â€¢ <strong>Cohen's h:</strong> 2ã¤ã®æ¯”ç‡ã®å·®ã®åŠ¹æœé‡ï¼ˆå®Ÿè³ªçš„ãªå·®ã®å¤§ãã•ï¼‰</p>
                                    <p>â€¢ <strong>ãƒ™ã‚¤ã‚ºæ¨å®š:</strong> ã©ã¡ã‚‰ã®ç·¨æˆãŒå¼·ã„ç¢ºç‡ã‚’ç›´æ¥è¨ˆç®—</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<PlayerComparisonTool />, document.getElementById('root'));
    </script>
</body>
</html>
